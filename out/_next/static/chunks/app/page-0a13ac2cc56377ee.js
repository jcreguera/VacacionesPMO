(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9488:function(e,t,s){Promise.resolve().then(s.bind(s,8474))},8474:function(e,t,s){"use strict";s.d(t,{default:function(){return d}});var n=s(7437),r=s(2265),a=e=>{let{config:t,onConfigChange:s,onReset:r}=e,a=e=>{s({...t,monthsToShow:e})},o=e=>{s({...t,monthsPerRow:e})},l=e=>{s({...t,persons:t.persons.filter(t=>t.id!==e)})},i=(e,n,r)=>{"isActive"===n?s({...t,persons:t.persons.map(t=>({...t,isActive:t.id===e&&!t.isActive}))}):s({...t,persons:t.persons.map(t=>t.id===e?{...t,[n]:r}:t)})};return(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(3===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>a(3),children:"3 meses"}),(0,n.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(6===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>a(6),children:"6 meses"}),(0,n.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(12===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>a(12),children:"12 meses"})]}),(0,n.jsxs)("div",{className:"border-l pl-4 flex gap-2",children:[(0,n.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(3===t.monthsPerRow?"bg-green-500 text-white":"bg-gray-200"),onClick:()=>o(3),children:"3 por fila"}),(0,n.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(6===t.monthsPerRow?"bg-green-500 text-white":"bg-gray-200"),onClick:()=>o(6),children:"6 por fila"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>{let e={id:"person-".concat(t.persons.length+1),name:"Persona ".concat(t.persons.length+1),color:"#".concat(Math.floor(16777215*Math.random()).toString(16)),maxDays:10,selectedDates:[],isActive:!1};s({...t,persons:[...t.persons,e]})},className:"px-2 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"+ Persona"}),(0,n.jsx)("button",{onClick:r,className:"px-2 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600",children:"Reiniciar"})]})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2",children:t.persons.map(e=>{var s;return(0,n.jsxs)("div",{className:"flex items-center gap-1 p-1 border rounded text-sm relative",style:{backgroundColor:"".concat(e.color,"10")},children:[(0,n.jsx)("input",{type:"color",value:e.color,onChange:t=>i(e.id,"color",t.target.value),className:"w-6 h-6"}),(0,n.jsx)("input",{type:"text",value:e.name,onChange:t=>i(e.id,"name",t.target.value),className:"w-24 px-1 py-0.5 border rounded text-xs",placeholder:"Nombre"}),(0,n.jsx)("input",{type:"number",value:e.maxDays,onChange:t=>i(e.id,"maxDays",parseInt(t.target.value)||0),className:"w-12 px-1 py-0.5 border rounded text-xs bg-gray-300",min:"1"}),(0,n.jsx)("div",{className:"w-12 px-1 py-0.5 border rounded text-xs bg-gray-50 text-center",children:e.maxDays-((null===(s=e.selectedDates)||void 0===s?void 0:s.length)||0)}),(0,n.jsx)("button",{onClick:()=>i(e.id,"isActive",null),className:"w-6 h-4 rounded-full transition-colors duration-200 ease-in-out ".concat(e.isActive?"bg-green-500":"bg-gray-200"),children:(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-white transform transition-transform duration-200 ease-in-out ".concat(e.isActive?"translate-x-3":"translate-x-0.5")})}),t.persons.length>1&&(0,n.jsx)("button",{onClick:()=>l(e.id),className:"text-red-500 text-sm hover:text-red-600 absolute right-1",children:"X"})]},e.id)})})]})};let o={monthsToShow:12,monthsPerRow:6,persons:[{id:"person-1",name:"Jos\xe9 Antonio",color:"#FF8080",maxDays:10,selectedDates:[],isActive:!1},{id:"person-2",name:"Pascual",color:"#1E40AF",maxDays:10,selectedDates:[],isActive:!1},{id:"person-3",name:"Jennifer",color:"#FFD700",maxDays:10,selectedDates:[],isActive:!1},{id:"person-4",name:"Juan Carlos",color:"#3B82F6",maxDays:10,selectedDates:[],isActive:!1}]};var l=s(168);s(8142),s(9077),s(4234);class i{async saveConfig(e){if(!this.isConnected){console.warn("SharePoint service not connected. Running in local mode."),localStorage.setItem("calendarConfig",JSON.stringify(e));return}try{let t=JSON.stringify(e,null,2);await l.sp.web.getFolderByServerRelativeUrl(this.folderPath).files.add(this.fileName,t,!0)}catch(e){throw console.error("Error saving config:",e),e}}async loadConfig(){if(!this.isConnected){console.warn("SharePoint service not connected. Running in local mode.");let e=localStorage.getItem("calendarConfig");return e?JSON.parse(e):null}try{let e=await l.sp.web.getFolderByServerRelativeUrl(this.folderPath).files.getByName(this.fileName).getText();return JSON.parse(e)}catch(e){return console.error("Error loading config:",e),null}}constructor(e){this.folderPath="Shared Documents/VacacionesApp",this.fileName="datos.json",this.isConnected=!1;try{l.sp.setup({sp:{baseUrl:e}}),this.isConnected=!0}catch(e){console.warn("Error initializing SharePoint service:",e),this.isConnected=!1}}}let c=()=>void 0===window._spPageContextInfo?"http://tu-sharepoint-url.com":window._spPageContextInfo.webAbsoluteUrl;var d=()=>{let[e,t]=(0,r.useState)(o),[s,l]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[g,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=new i(c());m(e),(async()=>{try{let s=await e.loadConfig();s&&t(s)}catch(e){console.error("Error loading initial config:",e),l("Error al cargar la configuraci\xf3n inicial")}finally{u(!1)}})()},[]);let h=async()=>{try{d&&(u(!0),await d.saveConfig(e),l("Configuraci\xf3n guardada correctamente"))}catch(e){console.error("Error saving config:",e),l("Error al guardar la configuraci\xf3n")}finally{u(!1),setTimeout(()=>l(""),3e3)}},x=async()=>{try{if(d){u(!0);let e=await d.loadConfig();e&&(t(e),l("Configuraci\xf3n cargada correctamente"))}}catch(e){console.error("Error loading config:",e),l("Error al cargar la configuraci\xf3n")}finally{u(!1),setTimeout(()=>l(""),3e3)}},p=t=>{let s=t.toISOString().split("T")[0],n=e.persons.filter(e=>e.selectedDates.includes(s)).length;return n>5?"bg-red-900 text-white":({0:"bg-white",1:"bg-green-500",2:"bg-blue-200",3:"bg-yellow-200",4:"bg-red-200",5:"bg-red-800 text-white"})[n]||"bg-red-900 text-white"},b=t=>{let s=t.toISOString().split("T")[0];return e.persons.filter(e=>e.selectedDates.includes(s))},f=s=>{let n=s.toISOString().split("T")[0],r=e.persons.find(e=>e.isActive);if(!r){l("Por favor, selecciona una persona antes de marcar fechas"),setTimeout(()=>l(""),3e3);return}t(e=>{let t=e.persons.map(e=>e.id===r.id?-1!==e.selectedDates.indexOf(n)?{...e,selectedDates:e.selectedDates.filter(e=>e!==n)}:e.selectedDates.length>=e.maxDays?(l("".concat(e.name," ha alcanzado el m\xe1ximo de ").concat(e.maxDays," d\xedas")),setTimeout(()=>l(""),3e3),e):{...e,selectedDates:[...e.selectedDates,n]}:e);return{...e,persons:t}})},v=(()=>{let t=[],s=new Date;for(let n=0;n<e.monthsToShow;n++){let e=new Date(s.getFullYear(),s.getMonth()+n,1),r=Array.from({length:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},(t,s)=>new Date(e.getFullYear(),e.getMonth(),s+1));t.push({month:e,days:r})}return t})();return g?(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Calendario de Vacaciones"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:x,className:"px-3 py-4 bg-blue-500 text-white rounded-full text-sm hover:bg-blue-600",children:"LOAD"}),(0,n.jsx)("button",{onClick:h,className:"px-3 py-4 bg-green-500 text-white rounded-full text-sm hover:bg-green-600",children:"SAVE"}),(0,n.jsx)("button",{onClick:()=>{let t=new Blob([JSON.stringify({config:e,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="vacaciones-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},className:"px-2 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Exportar"}),(0,n.jsxs)("label",{className:"px-2 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 cursor-pointer",children:["Importar",(0,n.jsx)("input",{type:"file",accept:".json",onChange:e=>{var s;let n=null===(s=e.target.files)||void 0===s?void 0:s[0];if(n){let e=new FileReader;e.onload=e=>{try{var s;let n=JSON.parse(null===(s=e.target)||void 0===s?void 0:s.result);t(n.config),l("Datos importados correctamente"),setTimeout(()=>l(""),3e3)}catch(e){l("Error al importar datos"),setTimeout(()=>l(""),3e3)}},e.readAsText(n)}},className:"hidden"})]})]})]}),(0,n.jsx)(a,{config:e,onConfigChange:t,onReset:()=>{t(o),l("Configuraci\xf3n restablecida"),setTimeout(()=>l(""),3e3)}}),s&&(0,n.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative text-sm",children:s}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,n.jsx)("div",{className:"grid gap-8",children:Array.from({length:Math.ceil(v.length/e.monthsPerRow)}).map((t,s)=>(0,n.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(e.monthsPerRow,", 1fr)"),gap:"1rem",borderTop:s>0?"1px solid #e5e7eb":"none"},children:v.slice(s*e.monthsPerRow,(s+1)*e.monthsPerRow).map((e,t)=>{let{month:s,days:r}=e;return(0,n.jsxs)("div",{className:"min-w-0",style:{borderLeft:t>0?"1px solid #e5e7eb":"none",paddingLeft:t>0?"1rem":"0"},children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2 bg-blue-50 text-blue-900 p-2 w-full text-left rounded-t italic",children:s.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),(0,n.jsxs)("div",{className:"grid grid-cols-7 gap-0.5",children:[["Lu","Ma","Mi","Ju","Vi","Sa","Do"].map(e=>(0,n.jsx)("div",{className:"text-center text-xs font-medium",children:e},e)),Array(0===r[0].getDay()?6:r[0].getDay()-1).fill(null).map((e,t)=>(0,n.jsx)("div",{},"empty-".concat(t))),r.map(e=>{let t=b(e);return(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsxs)("button",{onClick:()=>f(e),className:"w-full aspect-square ".concat(p(e)," \n                                hover:opacity-75 transition-opacity rounded border border-gray-200 \n                                flex flex-col items-center justify-center"),children:[(0,n.jsx)("span",{className:"text-xs font-medium",children:e.getDate()}),t.length>0&&(0,n.jsx)("div",{className:"flex flex-wrap gap-0.5 mt-0.5 w-full max-w-[90%] justify-center",children:t.map(e=>(0,n.jsx)("div",{className:"w-1 h-2 rounded-full flex-shrink-0",style:{backgroundColor:e.color}},e.id))})]}),t.length>0&&(0,n.jsxs)("div",{className:"absolute z-10 invisible group-hover:visible  bg-white border rounded shadow-lg p-2 min-w-[150px]  left-1/2 transform -translate-x-1/2 text-xs",children:[(0,n.jsx)("p",{className:"font-medium mb-1",children:"Personas:"}),(0,n.jsx)("ul",{className:"space-y-1",children:t.map(e=>(0,n.jsxs)("li",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,n.jsx)("span",{children:e.name})]},e.id))})]})]},e.toISOString())})]})]},s.toString())})},s))})})]})}}},function(e){e.O(0,[619,971,117,744],function(){return e(e.s=9488)}),_N_E=e.O()}]);