(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9488:function(e,t,s){Promise.resolve().then(s.bind(s,6368))},6368:function(e,t,s){"use strict";s.d(t,{default:function(){return o}});var a=s(7437),n=s(2265),r=e=>{let{config:t,onConfigChange:s,onReset:n}=e,r=e=>{s({...t,monthsToShow:e})},l=e=>{s({...t,monthsPerRow:e})},o=e=>{s({...t,persons:t.persons.filter(t=>t.id!==e)})},i=(e,a,n)=>{"isActive"===a?s({...t,persons:t.persons.map(t=>({...t,isActive:t.id===e&&!t.isActive}))}):s({...t,persons:t.persons.map(t=>t.id===e?{...t,[a]:n}:t)})};return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(3===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>r(3),children:"3 meses"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(6===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>r(6),children:"6 meses"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(12===t.monthsToShow?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>r(12),children:"12 meses"})]}),(0,a.jsxs)("div",{className:"border-l pl-4 flex gap-2",children:[(0,a.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(3===t.monthsPerRow?"bg-green-500 text-white":"bg-gray-200"),onClick:()=>l(3),children:"3 por fila"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded text-sm ".concat(6===t.monthsPerRow?"bg-green-500 text-white":"bg-gray-200"),onClick:()=>l(6),children:"6 por fila"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e={id:"person-".concat(t.persons.length+1),name:"Persona ".concat(t.persons.length+1),color:"#".concat(Math.floor(16777215*Math.random()).toString(16)),maxDays:10,selectedDates:[],isActive:!1};s({...t,persons:[...t.persons,e]})},className:"px-2 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"+ Persona"}),(0,a.jsx)("button",{onClick:n,className:"px-2 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600",children:"Reiniciar"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2",children:t.persons.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-1 p-1 border rounded text-sm relative",style:{backgroundColor:"".concat(e.color,"10")},children:[(0,a.jsx)("input",{type:"color",value:e.color,onChange:t=>i(e.id,"color",t.target.value),className:"w-6 h-6"}),(0,a.jsx)("input",{type:"text",value:e.name,onChange:t=>i(e.id,"name",t.target.value),className:"w-24 px-1 py-0.5 border rounded text-xs",placeholder:"Nombre"}),(0,a.jsx)("input",{type:"number",value:e.maxDays,onChange:t=>i(e.id,"maxDays",parseInt(t.target.value)||0),className:"w-12 px-1 py-0.5 border rounded text-xs bg-gray-300",min:"1"}),(0,a.jsx)("div",{className:"w-12 px-1 py-0.5 border rounded text-xs bg-gray-50 text-center",children:e.maxDays-((null===(s=e.selectedDates)||void 0===s?void 0:s.length)||0)}),(0,a.jsx)("button",{onClick:()=>i(e.id,"isActive",null),className:"w-6 h-4 rounded-full transition-colors duration-200 ease-in-out ".concat(e.isActive?"bg-green-500":"bg-gray-200"),children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-white transform transition-transform duration-200 ease-in-out ".concat(e.isActive?"translate-x-3":"translate-x-0.5")})}),t.persons.length>1&&(0,a.jsx)("button",{onClick:()=>o(e.id),className:"text-red-500 text-sm hover:text-red-600 absolute right-1",children:"X"})]},e.id)})})]})};let l={monthsToShow:3,monthsPerRow:3,persons:[{id:"person-1",name:"Jos\xe9 Antonio",color:"#FF8080",maxDays:10,selectedDates:[],isActive:!1},{id:"person-2",name:"Pascual",color:"#1E40AF",maxDays:10,selectedDates:[],isActive:!1},{id:"person-3",name:"Jennifer",color:"#FFD700",maxDays:10,selectedDates:[],isActive:!1},{id:"person-4",name:"Juan Carlos",color:"#3B82F6",maxDays:10,selectedDates:[],isActive:!1}]};var o=()=>{let[e,t]=(0,n.useState)(l),[s,o]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{c(!0);let e=localStorage.getItem("calendarConfig");e&&t(JSON.parse(e))},[]),(0,n.useEffect)(()=>{i&&localStorage.setItem("calendarConfig",JSON.stringify(e))},[e,i]);let d=t=>{let s=t.toISOString().split("T")[0],a=e.persons.filter(e=>e.selectedDates.includes(s)).length;return a>5?"bg-red-900 text-white":({0:"bg-white",1:"bg-green-500",2:"bg-blue-200",3:"bg-yellow-200",4:"bg-red-200",5:"bg-red-800 text-white"})[a]||"bg-red-900 text-white"},m=t=>{let s=t.toISOString().split("T")[0];return e.persons.filter(e=>e.selectedDates.includes(s))},x=s=>{let a=s.toISOString().split("T")[0],n=e.persons.find(e=>e.isActive);if(!n){o("Por favor, selecciona una persona antes de marcar fechas"),setTimeout(()=>o(""),3e3);return}t(e=>{let t=e.persons.map(e=>e.id===n.id?-1!==e.selectedDates.indexOf(a)?{...e,selectedDates:e.selectedDates.filter(e=>e!==a)}:e.selectedDates.length>=e.maxDays?(o("".concat(e.name," ha alcanzado el m\xe1ximo de ").concat(e.maxDays," d\xedas")),setTimeout(()=>o(""),3e3),e):{...e,selectedDates:[...e.selectedDates,a]}:e);return{...e,persons:t}})},g=(()=>{let t=[],s=new Date;for(let a=0;a<e.monthsToShow;a++){let e=new Date(s.getFullYear(),s.getMonth()+a,1),n=Array.from({length:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},(t,s)=>new Date(e.getFullYear(),e.getMonth(),s+1));t.push({month:e,days:n})}return t})();return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Calendario de Vacaciones"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let t=new Blob([JSON.stringify({config:e,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="vacaciones-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"px-2 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Exportar"}),(0,a.jsxs)("label",{className:"px-2 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 cursor-pointer",children:["Importar",(0,a.jsx)("input",{type:"file",accept:".json",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){let e=new FileReader;e.onload=e=>{try{var s;let a=JSON.parse(null===(s=e.target)||void 0===s?void 0:s.result);t(a.config),o("Datos importados correctamente"),setTimeout(()=>o(""),3e3)}catch(e){o("Error al importar datos"),setTimeout(()=>o(""),3e3)}},e.readAsText(a)}},className:"hidden"})]})]})]}),(0,a.jsx)(r,{config:e,onConfigChange:t,onReset:()=>{t(l),localStorage.removeItem("calendarConfig"),o("Configuraci\xf3n restablecida"),setTimeout(()=>o(""),3e3)}}),s&&(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative text-sm",children:s}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsx)("div",{className:"grid gap-8",children:Array.from({length:Math.ceil(g.length/e.monthsPerRow)}).map((t,s)=>(0,a.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(e.monthsPerRow,", 1fr)"),gap:"1rem",borderTop:s>0?"1px solid #e5e7eb":"none"},children:g.slice(s*e.monthsPerRow,(s+1)*e.monthsPerRow).map((e,t)=>{let{month:s,days:n}=e;return(0,a.jsxs)("div",{className:"min-w-0",style:{borderLeft:t>0?"1px solid #e5e7eb":"none",paddingLeft:t>0?"1rem":"0"},children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2 bg-blue-50 text-blue-900 p-2 w-full text-left rounded-t italic",children:s.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-0.5",children:[["Lu","Ma","Mi","Ju","Vi","Sa","Do"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-medium",children:e},e)),Array(0===n[0].getDay()?6:n[0].getDay()-1).fill(null).map((e,t)=>(0,a.jsx)("div",{},"empty-".concat(t))),n.map(e=>{let t=m(e);return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{onClick:()=>x(e),className:"w-full aspect-square ".concat(d(e)," \n                                hover:opacity-75 transition-opacity rounded border border-gray-200 \n                                flex flex-col items-center justify-center"),children:[(0,a.jsx)("span",{className:"text-xs font-medium",children:e.getDate()}),t.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-0.5 mt-0.5 w-full max-w-[90%] justify-center",children:t.map(e=>(0,a.jsx)("div",{className:"w-1 h-2 rounded-full flex-shrink-0",style:{backgroundColor:e.color}},e.id))})]}),t.length>0&&(0,a.jsxs)("div",{className:"absolute z-10 invisible group-hover:visible  bg-white border rounded shadow-lg p-2 min-w-[150px]  left-1/2 transform -translate-x-1/2 text-xs",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Personas:"}),(0,a.jsx)("ul",{className:"space-y-1",children:t.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{children:e.name})]},e.id))})]})]},e.toISOString())})]})]},s.toString())})},s))})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9488)}),_N_E=e.O()}]);